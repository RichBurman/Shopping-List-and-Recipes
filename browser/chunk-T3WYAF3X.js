import{a as j}from"./chunk-OTPWLP7M.js";import{a as q,c as P,d as Q,f as k,h as H,i as O,q as U,r as G,s as z,u as B}from"./chunk-6LTLCDXA.js";import{Aa as g,B as l,Ba as W,C as d,D as L,G as S,I as u,K as a,L as s,M as f,N as M,O as y,P as h,R as E,S as F,T as V,U as C,V as m,W as I,X as A,ha as R,ja as N,n as _,r as w,s as x,sa as D,v,w as b,wa as T,ya as J,za as K}from"./chunk-MY5YCN2Y.js";import"./chunk-5FZOKLP6.js";function Z(n,t){}function $(n,t){n&1&&(a(0,"div",6),f(1,"app-loading-spinner"),s())}function ee(n,t){if(n&1){let p=M();a(0,"form",7,0),y("ngSubmit",function(){v(p);let e=C(1),o=h();return b(o.onSubmit(e))}),a(2,"div",8)(3,"label",9),m(4,"Email"),s(),f(5,"input",10),s(),a(6,"div",8)(7,"label",11),m(8,"Password"),s(),f(9,"input",12),s(),a(10,"div")(11,"button",13),m(12),s(),m(13," | "),a(14,"button",14),y("click",function(){v(p);let e=h();return b(e.onSwitchMode())}),m(15),s()()()}if(n&2){let p=C(1),i=h();l(11),u("disabled",!p.valid),l(),I(i.isLoginMode?"Login":"Sign Up"),l(3),A("Switch to ",i.isLoginMode?"Sign Up":"Login","")}}var X=(()=>{let t=class t{constructor(i,e,o){this.authService=i,this.router=e,this.componentFactoryResolver=o,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(i){if(!i.valid)return;let e=i.value.email,o=i.value.password,r;this.isLoading=!0,this.isLoginMode?r=this.authService.login(e,o):r=this.authService.signup(e,o),r.subscribe(c=>{console.log(c),this.isLoading=!1,this.router.navigate(["/recipes"])},c=>{console.log(c),this.error=c,this.showErrorAlert(c),this.isLoading=!1}),i.reset()}onHandleError(){this.error=null}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}showErrorAlert(i){let e=this.componentFactoryResolver.resolveComponentFactory(J),o=this.alertHost.viewContainerRef;o.clear();let r=o.createComponent(e);r.instance.message=i,this.closeSub=r.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),o.clear()})}};t.\u0275fac=function(e){return new(e||t)(d(j),d(D),d(L))},t.\u0275cmp=w({type:t,selectors:[["app-auth"]],viewQuery:function(e,o){if(e&1&&E(g,5),e&2){let r;F(r=V())&&(o.alertHost=r.first)}},decls:5,vars:2,consts:[["authForm","ngForm"],["appPlaceholder",""],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){e&1&&(S(0,Z,0,0,"ng-template",1),a(1,"div",2)(2,"div",3),S(3,$,2,0,"div",4)(4,ee,16,3,"form",5),s()()),e&2&&(l(3),u("ngIf",o.isLoading),l(),u("ngIf",!o.isLoading))},dependencies:[R,O,q,P,Q,U,z,G,H,k,K,g],encapsulation:2});let n=t;return n})();var he=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x({type:t}),t.\u0275inj=_({imports:[N,B,T.forChild([{path:"",component:X}]),W]});let n=t;return n})();export{he as AuthModule};
